"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["33364"],{939672:function(t,n,e){e.d(n,{$A:function(){return g},N0:function(){return h},N3:function(){return v},VK:function(){return y},_J:function(){return b},mW:function(){return d}});var r=e(586659),o=e(503246),i=e(603316),a=e(382718);function c(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;u=!1}else for(;!(u=(r=i.call(e)).done)&&(c.push(r.value),c.length!==n);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,n)||function(t,n){if(t){if("string"==typeof t)return u(t,n);var e=({}).toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var s={},l={},f=!1,p=0,m=(0,r.createContext)({setMetric:function(){},getMetricForComponent:function(){},getMetricsForPath:function(){},setRmaData:function(){}});function d(t){var n=t.children,e=(0,r.useCallback)(function(t,n,e){s[t]||(s[t]={}),s[t][n]=e},[]),i=(0,r.useCallback)(function(t,n){var e;return null==(e=s[t])?void 0:e[n]},[]),c=(0,r.useCallback)(function(t){return s[t]},[]),u=(0,r.useCallback)(function(t){var n=t.id,e=t.path,r=t.fragmentName,i=t.executionTime,a=t.newData;if(!f){var c="".concat(r,".").concat(n);l[e]||(l[e]={}),l[e][c]||(l[e][c]={totalRenderTime:0,previousData:{},renderCount:0,resultUpdatedCount:0,wastedTime:0});var u=l[e][c];(0,o.ZP)(a,u.previousData)?(u.wastedTime+=i,p+=i):u.resultUpdatedCount+=1,u.totalRenderTime+=i,u.renderCount+=1,u.previousData=a}},[]),d=(0,r.useMemo)(function(){return{setMetric:e,getMetricForComponent:i,getMetricsForPath:c,setRmaData:u}},[e,i,c,u]);return(0,a.jsx)(m,{value:d,children:n})}function y(){return(0,r.use)(m)}function g(t){return s[t]}function v(t){return["www/index.js","www/homefeed.js","www/pin/[id].js"].includes(t)}function b(t){var n=l[t],e={};f=!0,n&&Object.keys(n).length&&v(t)&&(Object.entries(n).forEach(function(t){var n=c(t,2),r=n[0],o=n[1],a=c(r.split("."),1)[0];a&&!e[a]&&(e[a]=!0,(0,i.QX)("render_stats.rma.".concat(a,".renderCount"),o.renderCount,{sampleRate:1}),(0,i.QX)("render_stats.rma.".concat(a,".resultUpdatedCount"),o.resultUpdatedCount,{sampleRate:1}),(0,i.LY)("render_stats.rma.".concat(a,".renderTime"),o.totalRenderTime,{sampleRate:1}),(0,i.LY)("render_stats.rma.".concat(a,".wastedTime"),o.totalRenderTime,{sampleRate:1}))}),(0,i.LY)("render_stats.rma.totalWastedTime",p,{sampleRate:1,tags:{path:t}}))}function h(){s={},l={},f=!1,p=0}},622481:function(t,n,e){n.Z=(0,e(586659).createContext)(null)},282803:function(t,n,e){n.Z=(0,e(586659).createContext)(null)},255957:function(t,n,e){e.d(n,{Z:function(){return tt}});var r=e(586659),o=e(286036),i=e(457636),a=e(592109),c=e(901360),u=e(392824),s=e(67831),l=e(703393),f=e(735201),p=e(868178),m=e(891631),d=e(594885),y=e(579358);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return b(t,void 0);var e=({}).toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?b(t,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function h(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function S(t,n,e){var r;return(r=function(t,n){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=g(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"==g(r)?r:r+"")in t)?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var T=function(t){var n=performance.getEntriesByType("resource").filter(function(t){return t.name.includes("i.pinimg")}).reduce(function(t,n){var e=n.name.replace(".jpg","").split("/");return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?h(Object(e),!0).forEach(function(n){S(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}(S({},e[e.length-1],{downloadSize:n.name.split("/")[3].split("x")[0]}),t)},{}),e=Array.from(document.getElementsByTagName("img")).map(function(t){var e=t.src.replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]){var o,i=(null==(o=(0,y.rZ)(t))?void 0:o.width)||1,a=n[r].downloadSize;return{fileName:r,renderedSize:i,downloadedSize:a,ratio:a/i}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}}),r=Array.from(document.querySelectorAll('div[role="img"]')).map(function(t){var e=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]&&t instanceof HTMLDivElement){var o,i=(null==(o=(0,y.rZ)(t))?void 0:o.width)||1,a=n[r].downloadSize;return{fileName:r,renderedSize:i,downloadedSize:a,ratio:a/i}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}});[].concat(v(e),v(r)).forEach(function(n){var e=n.ratio,r=n.fileName,o=n.downloadedSize;n.ratio>1.05&&(0,c.A9)("checkImageRatio.".concat(t),{count:Math.round(10*e)/10,tags:{fileName:"".concat(o,"_").concat(r)}})})},w=e(970773),O=e(361423),A=e(15667),E=function(t,n){var e=(0,r.useRef)(n);return{getState:function(){return e.current},dispatch:function(n){e.current=t(e.current,n)}}},I=e(112114),j=e(603316),P=e(382718);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var C=["children"];function M(t,n){if(null==t)return{};var e,r,o=function(t,n){if(null==t)return{};var e={};for(var r in t)if(({}).hasOwnProperty.call(t,r)){if(-1!==n.indexOf(r))continue;e[r]=t[r]}return e}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e=i[r],-1===n.indexOf(e)&&({}).propertyIsEnumerable.call(t,e)&&(o[e]=t[e])}return o}function N(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function R(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?N(Object(e),!0).forEach(function(n){x(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):N(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function x(t,n,e){return(n=L(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function L(t){var n=function(t,n){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=_(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==_(n)?n:n+""}function D(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return Z(t,void 0);var e=({}).toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Z(t,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var B=["initial_app_load","client_route_push"],k=(0,a.XV)("PwtSurface"),H="NavigationComplete",U="VisuallyComplete",z=function(){(0,f._T)()},V=function(t,n){var e=t.metricConfig,r=e.metricId,o=e.pwtStaticContext,a=e.annotateExperiments,s=t.annotations,p=t.binaryAnnotations,m=t.constraintMap,d=t.startTime,y=t.imageTimings,g=t.spans,v=t.traceId;(0,u.L8)("Report_PWT_Complete_".concat((0,i.KJ)(r)),d,n);var b=(0,l.W)({annotateExperiments:D(null!=a?a:[]),annotations:s,binaryAnnotations:p,constraintMap:m,endTime:n,imageTimings:y,metricId:r,pwtStaticContext:o,startTime:d,traceId:v,spans:g});try{T(String(b.binaryAnnotationMap["metricId.surface"].value))}catch(t){(0,c.H)("image_ratio_check_error",{error:t})}return(0,f._T)(),R(R({},t),{},{result:b,status:"DONE"})},G=function(t){if(t.metricConfig.constraints.every(function(n){return t.constraintMap[n]})){var n=Math.max.apply(Math,D(t.metricConfig.constraints.map(function(n){return t.constraintMap[n]})));return V(t,n)}return k("Remaining constraints: ".concat(t.metricConfig.constraints.filter(function(n){return!t.constraintMap[n]}).join(", "))),t},Y=function(t,n){var e=n.constraint,r=n.time,o=(0,i.KJ)(t.metricConfig.metricId);return O.Z?t.metricConfig.constraints.find(function(t){return t===e})?t.constraintMap[e]?(k('constraint "'.concat(e,'" is already complete.')),(0,c.H)("duplicated_constraint_complete",{constraint:e,action:o}),t):(k('marking constraint "'.concat(e,'" as complete ').concat(r||performance.now())),r?(0,u.ZP)("constraint_".concat(e,"_is_complete"),r):(0,u.ZP)("constraint_".concat(e,"_is_complete")),G(R(R({},t),{},{constraintMap:R(R({},t.constraintMap),{},x({},e,r||O.Z.now()))}))):(k('marked constraint "'.concat(e,'" is not a required constraint.')),t):((0,c.H)("missing_window_performance",{action:o}),t)},F=function(t,n){if(!O.Z){var e=(0,i.KJ)(t.metricConfig.metricId);(0,c.H)("missing_window_performance",{action:e})}k('removing constraint "'.concat(n,'"'));var r=t.metricConfig.constraints.filter(function(t){return t!==n}),o=t.constraintMap,a=(o[n],M(o,[n].map(L)));return G(R(R({},t),{},{constraintMap:a,metricConfig:R(R({},t.metricConfig),{},{constraints:r})}))},q=function(t,n){if(!O.Z){var e=(0,i.KJ)(t.metricConfig.metricId);(0,c.H)("missing_window_performance",{action:e})}k('updating pwt segment to "'.concat(n,'"'));var r=R(R({},t.metricConfig.metricId),{},{segment:n});return R(R({},t),{},{metricConfig:R(R({},t.metricConfig),{},{metricId:r})})},W=function(t,n){var e=n.metricConfig,r=n.startTime,o=n.isSampled,a=n.disablePWTLogging;if(a||"TIMING"!==t.status||r===t.startTime||z(),!e)return{status:"DISABLED",metricConfig:null};var u=(0,i.KJ)(e.metricId);if("TIMING"===t.status&&t.startTime===r&&t.constraintMap[H])return(0,c.H)("duplicated_init_route_action",{action:u}),t;if(!a){var s,l,m,d,y,g=(0,I.H)();(0,c.A9)("handler.".concat(u),{tags:{handler:g}});var v=void 0!==e.metricId.isAuthenticated&&{tags:{isAuth:e.metricId.isAuthenticated}}||void 0;"Other"===e.pwtStaticContext.browserName&&!1===e.metricId.isAuthenticated&&"initial_app_load"===e.metricId.navigationType?((0,c.A9)("TIMING.".concat(u),{tags:{userAgent:null==(l=window)||null==(m=l.navigator)?void 0:m.userAgent}}),(0,c.A9)("TIMING.sampled.".concat(u),{tags:{userAgent:null==(d=window)||null==(y=d.navigator)?void 0:y.userAgent},sampleRate:.03})):((0,c.A9)("TIMING.".concat(u)),(0,c.A9)("TIMING.sampled.".concat(u),{sampleRate:.03})),(0,p.C)({resultLog:"TIMING.".concat(u),annotateExperiments:e.annotateExperiments||[],getExperimentGroup:e.pwtStaticContext.getExperimentGroup,options:v})}return Y({traceId:(0,f.vc)()||(0,f.ZP)("initial_app_load"===e.metricId.navigationType,null==(s=e.pwtStaticContext.serverData)?void 0:s.trace_id),status:"TIMING",metricConfig:e,startTime:r,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:o,spans:[]},{constraint:H,disablePWTLogging:a})},K=function(t,n){if(k("dispatch action",n),"INIT_ROUTE"===n.type)return W(t,n.payload);if("TIMING"!==t.status)return k("ignoring action due to invalid state ".concat(t.status),n),t;switch(n.type){case"ABORT":z();var e={type:"ABORT",reason:n.reason};return R(R({},t),{},{status:"DONE",result:e});case"ANNOTATE":var r=n.payload.name;if(!O.Z)return t;var o=O.Z.now();return k("adding annotation {".concat(r,": ").concat(o,"}")),R(R({},t),{},{annotations:R(R({},t.annotations),x({},r,o))});case"BINARY_ANNOTATE":var a=n.payload,u=a.name,s=a.value,l=a.annotationType;return k("adding binary annotation {".concat(u,": ").concat(s,"}")),R(R({},t),{},{binaryAnnotations:R(R({},t.binaryAnnotations),x({},u,{value:s,type:l}))});case"MARK_CONSTRAINT_COMPLETE":return Y(t,n.payload);case"REMOVE_CONSTRAINT":return F(t,n.payload);case"SET_SEGMENT":return q(t,n.payload);case"SET_VISUALLY_COMPLETE_RESULT":var f=n.payload.imageTimings;if(0===f.length)return z(),R(R({},t),{},{status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}});var p=Math.max.apply(Math,D(f.map(function(t){return t.responseEnd||0})));return Y(R(R({},t),{},{imageTimings:f}),{constraint:U,time:p});case"ADD_SUBSPAN":var m=t.startTime,d=n.payload,y=d.name,g=d.startTime,v=d.endTime,b=d.annotations,h=d.binaryAnnotations,S=d.parentId;return R(R({},t),{},{spans:[].concat(D(t.spans),[{name:y,id:(0,w.Z)(),startTime:g||m,endTime:v,annotationMap:R({},b),binaryAnnotationMap:R({},h),parentId:S}])});case"START_SUBSPAN":return R(R({},t),{},{spans:[].concat(D(t.spans),[{name:n.payload.name,id:(0,w.Z)(),startTime:O.Z?O.Z.now():0,endTime:1/0,annotationMap:R({},n.payload.annotations),binaryAnnotationMap:R({},n.payload.binaryAnnotations),parentId:n.payload.parentId}])});case"STOP_SUBSPAN":var T=t.spans.findIndex(function(t){return t.name===n.payload.name});return T>-1?(t.spans[T].endTime=O.Z?O.Z.now():0,n.payload.annotations&&(t.spans[T].annotationMap=R(R({},t.spans[T].annotationMap),n.payload.annotations)),n.payload.binaryAnnotations&&(t.spans[T].binaryAnnotationMap=R(R({},t.spans[T].binaryAnnotationMap),n.payload.binaryAnnotations))):(0,c.H)("invalid_subspan_stop_name",{name:n.payload.name}),t;default:var A=(0,i.KJ)(t.metricConfig.metricId);return(0,c.H)("invalid_pwt_surface_action",{action:A}),t}},J=function(t){if(!t)return"initial_app_load";switch(t.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},$=new Set,Q=function(t){var n=t.surface,e=t.constraints,i=t.segment,a=t.measureGridVisuallyComplete,c=t.annotateExperiments,u=t.customEnabledNavigationTypes,s=t.navigationInfo,l=s.clientNavigation,f=s.navigationType,p=t.sampleRate,m=(0,r.useRef)("NOT_SET"),y=(0,d.Z)(),g=E(K,{status:"DISABLED",metricConfig:null}),v=g.getState,b=g.dispatch,h=(0,A.B)();if(m.current!==l&&(m.current=l,y)){var S=y.isAuthenticated,T=n&&f&&(u||B).includes(f)?{metricId:{type:"surface",surface:n,navigationType:f,isAuthenticated:S,segment:i},annotateExperiments:c,constraints:[H].concat(D(e||[]),D(a?[U]:[])),pwtStaticContext:y}:null;(0,j.nP)("webapp.pwt_surface.init_route",{tags:{surface:n,navigationType:f,isAuthenticated:S}});var w=!$.has(l);b({type:"INIT_ROUTE",payload:{metricConfig:T,startTime:l?l.time:0,isSampled:!p||Math.random()<p,disablePWTLogging:!w}}),w&&$.add(l)}var P=v();if((0,r.useEffect)(function(){return function(){$.delete(l)}},[l]),(0,r.useEffect)(function(){var t=function(t){b({type:"ABORT",reason:t})};o.Z.onSessionPause(t);var n=window.innerHeight,e=window.innerWidth,r=function t(){var r,o,i,a=Math.abs(window.innerHeight-n),c=Math.abs(window.innerWidth-e),u=window.innerHeight!==n,s=window.innerWidth!==e,l={handler:(0,I.H)(),deviceType:null!=(r=null==y?void 0:y.deviceType)?r:"unknown",isAuthenticated:null!=(o=null==y?void 0:y.isAuthenticated)?o:"unknown",platform:null!=(i=h.userAgent.platform)?i:"unknown"};if((0,j.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:R(R({},l),{},{heightChanged:u,widthChanged:s})}),u&&(0,j.S0)("webapp.PwtLogger.resizeHeightDelta",a,{sampleRate:1,tags:l}),s&&(0,j.S0)("webapp.PwtLogger.resizeWidthDelta",c,{sampleRate:1,tags:l}),window.removeEventListener("resize",t),(null==y?void 0:y.deviceType)==="phone"&&(!s&&u&&a<=150||!u&&!s)||(null==y?void 0:y.deviceType)==="desktop"&&!u&&!s)return void(0,j.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:R(R({},l),{},{heightChanged:u,widthChanged:s})});b({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",r),function(){var n=v();k("handling unmount",n),"TIMING"===n.status&&z(),o.Z.removePauseListener(t),window.removeEventListener("resize",r)}},[]),"TIMING"!==P.status||!P.constraintMap[H])return{state:P,context:null};var _=P.startTime,C=P.metricConfig;return{state:P,context:{abort:function(t){return b({type:"ABORT",reason:t})},addAnnotation:function(t){return b({type:"ANNOTATE",payload:{name:t}})},addBinaryAnnotation:function(t,n,e){return b({type:"BINARY_ANNOTATE",payload:{name:t,value:n,annotationType:e}})},addSubspan:function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return b({type:"ADD_SUBSPAN",payload:{name:t,startTime:n,endTime:e,annotations:r,binaryAnnotations:o,parentId:i}})},getId:function(){return _},getMetricId:function(){return C.metricId},markConstraintComplete:function(t){return b({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:t,time:O.Z?O.Z.now():0}})},removeConstraint:function(t){return b({type:"REMOVE_CONSTRAINT",payload:t})},setSegment:function(t){return b({type:"SET_SEGMENT",payload:t})},setVisuallyCompleteResult:C.constraints.includes(U)?function(t){return b({type:"SET_VISUALLY_COMPLETE_RESULT",payload:t})}:null,startSubspan:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b({type:"START_SUBSPAN",payload:{name:t,annotations:n,binaryAnnotations:e,parentId:r}})},stopSubspan:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b({type:"STOP_SUBSPAN",payload:{name:t,annotations:n,binaryAnnotations:e,parentId:r}})}}}},X=function(){var t=(0,s.A)(),n=!!t;(0,r.useEffect)(function(){if(n){var e=null==t?void 0:t.getMetricId(),r=e?(0,i.KJ)(e):null;(0,c.H)("nested_pwt_surface",{action:r})}},[n])};function tt(t){var n,e=t.children,r=M(t,C),o=(0,m.Z)(),i=J(o),a=r.measureGridVisuallyComplete?["web_masonry_v2"]:[],c=[].concat(D(null!=(n=r.annotateExperiments)?n:[]),a),u=Q(R(R({},r),{},{annotateExperiments:c,navigationInfo:{navigationType:i,clientNavigation:o}})).context;return X(),(0,P.jsx)(s.S,{value:u,children:e})}},67831:function(t,n,e){e.d(n,{A:function(){return i},S:function(){return o}});var r=(0,e(729434).Z)("pwtSurfaceContext"),o=r.Provider,i=r.getMaybe},579358:function(t,n,e){e.d(n,{F9:function(){return d},LM:function(){return f},VZ:function(){return c},cQ:function(){return y},rZ:function(){return u}});var r=e(210811),o=e(901360);function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return a(t,void 0);var e=({}).toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var c=function(){return"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll},u=function(t){return t instanceof HTMLDivElement||t instanceof HTMLVideoElement?t.getBoundingClientRect():t.parentElement instanceof HTMLElement?t.parentElement.getBoundingClientRect():null},s=function(t,n){var e=t.top,r=t.height,o=n.foldY,i=e+n.pageYOffset;if(i>=o)return!1;var a=Math.min(r,o-i);return a>.5*r||a>.2*o},l=function(t){if(t instanceof HTMLImageElement)return t.src;if(t instanceof HTMLVideoElement)return t.attributes.poster.value;var n=((t.style||{}).backgroundImage||"").match(/^url\(["'](.*)["']\)$/);return n&&n[1]||null},f=function(){return document.querySelector?document.querySelectorAll(r.wc).length:((0,o.H)("missing_document_query_selector"),0)},p=function(){if(!document.querySelector)return(0,o.H)("missing_document_query_selector"),null;var t=document.querySelectorAll(r.wc);return t[t.length-1]||null},m=function(t,n){var e=u(t);if(!e)return(0,o.H)("missing_client_rect"),!1;if(e.width<70&&e.height<70){if(t instanceof HTMLImageElement)return!1;var r=l(t);if(null!=r&&r.endsWith("svg"))return!1}return s(e,n)},d=function(){var t=p();if(!t)return!1;var n=window.innerHeight||0,e=window.pageYOffset||0;return t.getBoundingClientRect().top+e>=n},y=function(t,n,e){if(!document.querySelector)return(0,o.H)("missing_document_query_selector"),[];var a={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},c=[r.Wf].concat(i(t?[r.fF]:[]),i(n?[r.$N]:[])).join(","),u=i(document.querySelectorAll(c));if(e){var s=i(document.querySelectorAll('div[data-test-id="board-section"]')),f=function t(n){var e=i(n.children);!e.length&&n.style.backgroundImage?u.push(n):e.length&&e.forEach(function(n){t(n)})};s.forEach(function(t){f(t)})}return u.reduce(function(t,e){if((e instanceof HTMLImageElement||e instanceof HTMLDivElement||e instanceof HTMLVideoElement&&n)&&m(e,a)){var r=l(e);if(r){var o=(r||"").replace(/.*\//,"");return t.concat([{element:e,fileName:o}])}}return t},[])}},210811:function(t,n,e){e.d(n,{$N:function(){return u},Kb:function(){return r},Wf:function(){return a},fF:function(){return c},wc:function(){return i}});var r="pwt-grid-item",o=['div[data-grid-item="true"]',"div.Grid__Item",'div[data-test-id="'.concat(r,'"]')],i=o.join(","),a=o.map(function(t){return"".concat(t," img")}).join(","),c=o.map(function(t){return"".concat(t," div[style*=background-image]")}).join(","),u=o.map(function(t){return"".concat(t," video")}).join(",")},703393:function(t,n,e){e.d(n,{W:function(){return H},N:function(){return U}});var r=e(392824),o=e(645214),i=e(788725),a=e(979817),c=e(498724),u=e(524447);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function f(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach(function(n){p(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function p(t,n,e){var r;return(r=function(t,n){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"==s(r)?r:r+"")in t)?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var m=function(t,n){return Object.keys(n).reduce(function(e,r){return f(f({},e),{},p({},"".concat(t).concat(r),n[r]))},{})};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function g(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?y(Object(e),!0).forEach(function(n){var r,o;r=n,o=e[n],(r=function(t){var n=function(t,n){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==d(n)?n:n+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):y(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var v=function(t){var n=t.constraintMap,e=t.initialNavTiming;return g(g(g(g({},t.annotations),m("constraint_",n)),m("mark_",(0,r.gQ)())),m("browser_",g(g({},e?f(f({},(0,c.Z)(e)),{},{domComplete:e.domComplete||0,domContentLoadedEventStart:e.domContentLoadedEventStart||0,domInteractive:e.domInteractive||0,workerStart:e.workerStart||0}):{}),{largestContentfulPaint:(0,u.v2)().largestContentfulPaint||0})))},b=e(375730);function h(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return S(t,void 0);var e=({}).toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?S(t,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var T=e(603316);function w(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,n){if(t){if("string"==typeof t)return A(t,n);var e=({}).toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?A(t,n):void 0}}function A(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function E(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function I(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?E(Object(e),!0).forEach(function(n){var r,o;r=n,o=e[n],(r=function(t){var n=function(t,n){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=j(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==j(n)?n:n+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):E(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var P=["client-","vendor-react-","index-","runtime-","locale-"],_=["PinResource","UserHomefeedResource","BaseSearchResource","BoardResource","UserResource","BoardFeedResource","runtime-","polyfills-","locale-","vendor-react-","vendor-react-","client-","index-","AuthDesktopHeader","StructuredFeed","[id]-","[scope]-","[username]-","CloseupActionBarCommon-","SaveAffordance-"],C=function(t){var n=t.eventPrefix,e=t.endTime,r=t.tags,o=t.resourceArr,i=t.resourceType,a=void 0===i?"allResources":i,c=o.length;if("object"===j(o[0])&&!Array.isArray(o[0])&&0!==c){if(P.includes(a)){var u=o[0],s=I(I({},r),{},{swIntercepted:u.workerStart>0,workerFinalSourceType:u.workerFinalSourceType||"unknown"});(0,T.LY)("".concat(n,".app_start_script_").concat(a.replace("-",""),".InFlight"),u.fetchStart,{tags:s}),(0,T.LY)("".concat(n,".app_start_script_").concat(a.replace("-",""),".Complete"),u.responseEnd,{tags:s})}if(_.includes(a)){var l=o[0];(0,T.LY)("".concat(n,".critical_resource_").concat(a.replace("-",""),".InFlight"),l.fetchStart,{tags:r}),(0,T.LY)("".concat(n,".critical_resource_").concat(a.replace("-",""),".Complete"),l.responseEnd,{tags:r})}else{for(var f=w(o).sort(function(t,n){return t.fetchStart-n.fetchStart}),p=w(o).sort(function(t,n){return t.responseEnd-n.responseEnd}),m=1,d=e/5,y=0;m<=5;){for(var g=0;y<=c-1&&f[y].fetchStart<=d*m;)y+=1,g+=1;(0,T.S0)("".concat(n,".").concat(a,".fetchStartInterval").concat(m,"of5"),g,{sampleRate:.2}),m+=1}var v={InFlightP0:f[0].fetchStart,InFlightP25:f[Math.floor(c/4)].fetchStart,InFlightP50:f[2*Math.floor(c/4)].fetchStart,InFlightP75:f[3*Math.floor(c/4)].fetchStart,InFlightP100:f[c-1].fetchStart,CompleteP25:p[Math.floor(c/4)].responseEnd,CompleteP50:p[2*Math.floor(c/4)].responseEnd,CompleteP75:p[3*Math.floor(c/4)].responseEnd,CompleteP100:p[c-1].responseEnd};for(var b in v)v[b]&&(0,T.LY)("".concat(n,".").concat(a,".").concat(b),v[b],{tags:r})}}},M=function(t){var n=t.annotateExperiments,e=t.endTime,r=t.entries,o=t.metricId,i=t.pwtStaticContext,a=i.isAuthenticated,c=i.isBot,u=i.isSocialBot,s=i.deviceType,l="".concat(u&&"socialBot"||c&&"bot"||"nonbot",".").concat(s,".").concat(o.surface),f=[l];n&&w(new Set(n)).forEach(function(t){var n=i.getExperimentGroup(t);n&&f.push("".concat(l,".experiment.").concat(t,".").concat(n))});var p={isAuthenticated:a,navigationType:o.navigationType,startType:i.startType},m=Array.from(r.filter(function(t){return"number"==typeof t.encodedBodySize&&("xmlhttprequest"===t.initiatorType&&t.encodedBodySize>=1e3||t.encodedBodySize>=1e4)&&t.responseEnd<=e})),d={img:[],css:[],script:[],xmlhttprequest:[],preloadedImages:[]};m.forEach(function(t){if("link"===t.initiatorType&&t.name.includes("i.pinimg.com"))d.preloadedImages=[].concat(w(d.preloadedImages||[]),[t]);else if(t.initiatorType in d){var n=t.initiatorType;d[n]=[].concat(w(d[n]||[]),[t]);var e=_.find(function(n){return t.name.includes(n)});e&&(d[e]=[t]);var r=P.find(function(n){return t.name.includes(n)});r&&(d[r]=[t])}}),f.forEach(function(t){C({eventPrefix:t,endTime:e,tags:p,resourceArr:m}),Object.entries(d).forEach(function(n){var r=function(t){if(Array.isArray(t))return t}(n)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,i,a,c=[],u=!0,s=!1;try{for(i=(e=e.call(t)).next;!(u=(r=i.call(e)).done)&&(c.push(r.value),2!==c.length);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(n,2)||O(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0];C({eventPrefix:t,endTime:e,tags:p,resourceArr:r[1],resourceType:o})})})},N=e(970773),R=e(293169);function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function D(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?L(Object(e),!0).forEach(function(n){var r,o;r=n,o=e[n],(r=function(t){var n=function(t,n){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=x(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==x(n)?n:n+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):L(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Z=function(t,n){var e=t.startTime,r=t.responseEnd;return e>n.endTime||!!r&&r<n.startTime},B=function(t,n){var e=t.startTime,r=t.endTime;return e>n.endTime||!!r&&r<n.startTime},k=function(t){var n,e=t.type,c=t.annotateExperiments,u=t.annotations,s=t.binaryAnnotations,l=t.constraintMap,f=t.endTime,p=t.imageTimings,m=t.isV4Logger,d=t.metricId,y=t.pwtStaticContext,g=t.startTime,S=t.traceId,T=t.spans,w=(0,R.Cg)();"initial_app_load"===d.navigationType&&(n=(0,i.Z)());var O=p.map(function(t){return t.name}),A=w.map(function(t){return(0,a.p)(t,O)}).filter(function(t){return!Z(t.timing,{startTime:g,endTime:f})}),E=((0,r.E3)()||[]).map(function(t){return{name:t.name,id:(0,N.Z)(),parentId:S,startTime:t.startTime||g,endTime:t.endTime,annotationMap:{},binaryAnnotationMap:{}}}).filter(function(t){return!B(t,{startTime:g,endTime:f})});return .2>Math.random()&&M({annotateExperiments:c,endTime:f,entries:w,metricId:d,pwtStaticContext:y}),{traceId:S,startTime:g,endTime:f,spans:[].concat(h(A.map(function(t){return(0,b.Z)(t,S)}).filter(Boolean)),h(E)).concat(T),annotationMap:v({constraintMap:l,initialNavTiming:n,annotations:u}),binaryAnnotationMap:(0,o.rA)({initialNavTiming:n||{},type:e,annotateExperiments:c,binaryAnnotations:s,entries:w,isV4Logger:m,metricId:d,performanceResources:A,pwtEndTime:f,pwtStaticContext:y})}},H=function(t){var n=t.annotateExperiments,e=t.annotations,r=t.binaryAnnotations,o=t.constraintMap,i=t.endTime,a=t.imageTimings,c=t.isV4Logger;return D({type:"COMPLETE"},k({type:"COMPLETE",annotateExperiments:n,annotations:e,binaryAnnotations:r,constraintMap:o,endTime:i,imageTimings:a,isV4Logger:void 0!==c&&c,metricId:t.metricId,pwtStaticContext:t.pwtStaticContext,startTime:t.startTime,traceId:t.traceId,spans:t.spans}))},U=function(t){var n=t.reason,e=t.annotateExperiments,r=t.annotations,o=t.binaryAnnotations,i=t.constraintMap,a=t.endTime,c=t.imageTimings,u=t.isV4Logger;return D({type:"ABORT",reason:n},k({type:"ABORT",annotateExperiments:e,annotations:r,binaryAnnotations:o,constraintMap:i,endTime:a,imageTimings:c,isV4Logger:void 0!==u&&u,metricId:t.metricId,pwtStaticContext:t.pwtStaticContext,startTime:t.startTime,traceId:t.traceId,spans:t.spans}))}},891631:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(586659),o=e(622481);function i(){return(0,r.useContext)(o.Z)}},594885:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(586659),o=e(282803);function i(){return(0,r.useContext)(o.Z)}}}]);