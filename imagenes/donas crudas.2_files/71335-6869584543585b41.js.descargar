"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["71335"],{903760:function(e,r,t){t.d(r,{D:function(){return l},q:function(){return p}});var n=t(586659),i=t(963489),o=t(378888),a=t(382718);function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var c=(0,n.createContext)(!1),s=function(){var e,r,t=(0,i.TH)();return(null==(e=t.state)?void 0:e.isAppFactoryOAuth)||(null!=(r=(0,o.mB)(t.search).next)?r:"").startsWith("/app-factory-oauth/")};function l(e){var r,t=e.children,i=s(),o=function(e){if(Array.isArray(e))return e}(r=(0,n.useState)(i))||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o,a,u=[],c=!0,s=!1;try{for(o=(t=t.call(e)).next;!(c=(n=o.call(t)).done)&&(u.push(n.value),2!==u.length);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(r,2)||function(e,r){if(e){if("string"==typeof e)return u(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,2):void 0}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=o[0],p=o[1];return(0,n.useEffect)(function(){i&&p(!0)},[i]),(0,a.jsx)(c,{value:l,children:t})}function p(){return(0,n.useContext)(c)}},420817:function(e,r,t){t.d(r,{Z:function(){return X}});var n=t(963489),i=t(78730),o=t(346955),a=t(20256),u=t(667835),c=t(15667),s=t(647709),l=t(382718),p=function(e){var r;return null!=(r=({"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"})[e])?r:"default"};function d(e){var r=e.children,t=(0,u.vs)(),n=(0,s.HG)(),i=p((0,c.B)().locale);return(0,l.jsx)(a.Ag,{colorScheme:t&&!n?"dark":"light",children:(0,l.jsx)(a.Ho,{languageMode:i,children:r})})}function f(e){var r=e.children,t=(0,s.ml)();return(0,l.jsx)(a.Q_,{deviceType:t?"mobile":"desktop",children:r})}var m=t(586659);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach(function(r){y(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function y(e,r,t){var n;return(n=function(e,r){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=v(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==v(n)?n:n+"")in e)?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var b=[];function w(e){var r=e.children,t=(0,c.B)();(0,m.useMemo)(function(){return{web_gestalt_calico:{anyEnabled:!0,group:"enabled"}}},[]);var n=b.reduce(function(e,r){return g(g({},e),{},y({},r,t.experimentsClient.checkExperiment(r)))},{});return(0,l.jsx)(a.II,{value:n,children:r})}var _=t(603316);function x(e){(0,_.nP)("gestalt-component-impression",{tags:{component:e}})}var P=t(816358),k=t(611282),E=t(104659);function T(e){var r,t,n,i,o,u,c,s,p=e.children,d=(r=(0,E.G)().setAppFocusState,t=(0,m.useCallback)(function(){P.Z.pause(),r(!1)},[r]),n=(0,m.useCallback)(function(){P.Z.resume(),r(!0)},[r]),i=(0,m.useMemo)(function(){return{onOpen:t,onClose:n}},[t,n]),o=(0,m.useMemo)(function(){return{onRender:function(){x("RadioGroup")}}},[]),u=(0,m.useMemo)(function(){return{onRender:function(){x("DateField")}}},[]),c=(0,m.useMemo)(function(){return{onRender:function(){x("DatePicker")}}},[]),s=(0,m.useMemo)(function(){return{onRender:function(){x("DateRange")}}},[]),{linkHandlers:(0,m.useMemo)(function(){return{onNavigation:function(e){var r=e.href,t=e.target;return(0,k.Z)({href:r,target:t})}}},[]),sheetMobileHandlers:i,radioGroupHandlers:o,dateFieldHandlers:u,datePickerHandlers:c,dateRangeHandlers:s}),f=d.sheetMobileHandlers,v=d.linkHandlers,h=d.radioGroupHandlers,g=d.datePickerHandlers,y=d.dateFieldHandlers,b=d.dateRangeHandlers;return(0,l.jsx)(a.uu,{dateFieldHandlers:y,datePickerHandlers:g,dateRangeHandlers:b,linkHandlers:v,radioGroupHandlers:h,sheetMobileHandlers:f,children:p})}var j=t(390843),D=t(35814),O=t(903760),I=t(274320),S=t(368177),C=t(901360),A=t(650533),R=t(529547),N=t(622481),Z=t(282803),L=t(392824),B=t(735201),H=t(524447),U=t(293169),F=function(){var e;return null!=(e=window.performance)&&e.now?window.performance.now():null},M=function(e){return["/advertiser/"].reduce(function(r,t){return e.includes(t)||r},!1)};function z(e){var r,t=e.children,n=e.immutableLocation,i=e.routerHistoryAction,o=e.staticContext,a=(0,m.useRef)(null),u=(0,m.useRef)(null),c=(0,m.useRef)(n),s=(0,m.useRef)(!0),p=(0,A.$B)(),d=p.path,f=p.params,v=(0,m.useRef)(d),h=(0,m.useRef)(f),g=(0,R.Z)(o.deviceType);if(s.current&&(0,B.ZP)(!0,null==(r=o.serverData)?void 0:r.trace_id),(0,m.useEffect)(function(){v.current=d},[d]),(0,m.useEffect)(function(){h.current=f},[f]),(0,m.useEffect)(function(){(0,H.UQ)(),s.current=!1},[]),M(n.pathname)?c.current.pathname!==n.pathname:c.current!==n){c.current=n,u.current=F();var y=u.current;if(!s.current){var b=!a.current;(0,C.A9)("routeStart",{tags:{action:i}}),(0,U.Eg)(b),(0,H.Ux)(b),(0,H.on)(),(0,L.tl)(),(0,B._T)(),(0,B.ZP)(!1);var w=(0,U.LH)().defaultBufferSize;y&&((0,C.A9)("routeStart.defaultBufferSize",{count:w}),a.current={time:y,action:i})}}return(0,l.jsx)(Z.Z,{value:g?o:null,children:(0,l.jsx)(N.Z,{value:a.current,children:t})})}var V=t(939672),G=t(30880),W=t(754545),q=t(956077);function J(e){var r=e.children,t=e.immutableLocation,n=e.routerHistoryAction,i=(0,m.useRef)(!0),o=(0,m.useRef)(!1),a=(0,m.useRef)(!1),u=(0,m.useRef)(t),c=performance.now(),s=(0,I.r)().checkExperiment("web_pwt_validate_suspense").group;return s&&(0,_.nP)("pwt_logger_v4_render",{sampleRate:1,tags:{experimentGroup:s}}),o.current=o.current||M(t.pathname)?u.current.pathname!==t.pathname:u.current!==t,o.current&&!a.current&&((0,W.yh)("routeChange"),a.current=!0,(0,V.N0)(),s&&(0,_.nP)("pwt_logger_v4_route_change_reset",{sampleRate:1,tags:{experimentGroup:s}})),(0,m.useLayoutEffect)(function(){if((M(t.pathname)?u.current.pathname!==t.pathname:u.current!==t)||i.current){u.current=t;var e=i.current?0:c;(0,W.ep)(n,e,i.current),(0,q.Nx)("NavigationCompletev4"),i.current=!1,o.current=!1,a.current=!1,s&&(0,_.nP)("pwt_logger_v4_navigation_complete",{sampleRate:1,tags:{experimentGroup:s}})}},[i,n,t,c,o]),r}function $(e){var r=e.children,t=e.immutableLocation,n=e.routerHistoryAction;return(0,G.Z)()?(0,l.jsx)(V.mW,{children:(0,l.jsx)(J,{immutableLocation:t,routerHistoryAction:n,children:r})}):r}var K=t(791948);function Q(e){var r=e.children,t=e.traceLoggerData,i=(0,c.B)(),o=(0,n.ur)(),a=(0,n.TH)(),u=(0,I.r)().checkExperiment("web_pwt_validate_suspense").group,s=(0,S.Z)({requestContext:i,traceLoggerData:t});return(0,C.iF)(o),"enabled_switch_v4_v3"===u?(0,l.jsx)($,{immutableLocation:a,routerHistoryAction:o,children:(0,l.jsx)(z,{immutableLocation:a,routerHistoryAction:o,staticContext:s,children:r})}):(0,l.jsx)(z,{immutableLocation:a,routerHistoryAction:o,staticContext:s,children:(0,l.jsx)($,{immutableLocation:a,routerHistoryAction:o,children:r})})}function X(e){var r=e.children,t=e.context,n=e.otaData,a=e.inContextTranslation,u=e.requestContext,c=e.resourceCreator,s=e.traceLoggerData,p=(0,I.r)().checkExperiment("web_pwt_validate_suspense").anyEnabled,m=(0,l.jsx)(f,{children:(0,l.jsx)(w,{children:(0,l.jsx)(d,{children:(0,l.jsx)(j.nK,{children:(0,l.jsx)(E.g,{children:(0,l.jsx)(T,{children:(0,l.jsx)(o.Ih,{children:(0,l.jsx)(O.D,{children:(0,l.jsx)(K.UZ,{resourceCreator:c,children:r})})})})})})})})});return(0,l.jsx)(i.E,{value:t,children:p?(0,l.jsx)(Q,{traceLoggerData:s,children:(0,l.jsx)(D.Z,{enableInContextTranslation:a,locale:u.locale,otaData:n,children:m})}):(0,l.jsx)(D.Z,{enableInContextTranslation:a,locale:u.locale,otaData:n,children:(0,l.jsx)(Q,{traceLoggerData:s,children:m})})})}},641527:function(e,r,t){t.d(r,{li:function(){return B},Ch:function(){return C},nc:function(){return U},a:function(){return F},ZP:function(){return M},cA:function(){return L}});var n,i,o,a=t(672410),u=t(898582),c=t(575108),s=t(296086),l=["element","eventData","component","objectId","view","viewParameter","viewData","durationNs","pairId","clientTrackingParams"],p=t(973160),d=t(346955),f=t(810288),m=t(991384),v=t(2420),h=t(734215),g=t(664450),y=t(603316),b=["object_id_str"],w=["cache_created_time","isImpression"];function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],-1===r.indexOf(t)&&({}).propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function P(e,r,t,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,i)}function k(e){return function(){var r=this,t=arguments;return new Promise(function(n,i){var o=e.apply(r,t);function a(e){P(o,n,i,a,u,"next",e)}function u(e){P(o,n,i,a,u,"throw",e)}a(void 0)})}}function E(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return T(e,void 0);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function D(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach(function(r){O(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function O(e,r,t){var n;return(n=function(e,r){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==_(n)?n:n+"")in e)?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var I=new Set([6945,170,3700]),S=new Set([3700]),C=(O(n={},3829,"articleImpressions"),O(n,18,"pinImpressions"),O(n,3700,"boardImpressions"),O(n,3803,"searchImpressions"),O(n,170,"storyImpression"),O(n,3704,"userImpressions"),n),A=[4700,4701,4702,4703,7042,7043],R=function(e){return(0,f.Z)(JSON.stringify(e))},N=function(e){return I.has(e)};function Z(){var e=new Date;i?i&&i.getUTCDate()!==e.getUTCDate()&&(i=e,(0,s.Z)()):i=e}var L=function(e){var r=e.event_type,t=A.includes(r),n=(0,d.BE)();return!!t||13===r||!!n},B=function(e,r){var t=e.event_type,n=A.includes(t),i=(0,d.BE)();return n?e:13===t&&e.view_type?(null==r||r({viewType:e.view_type,viewParameter:e.view_parameter,viewData:null!=i&&i.viewData?(0,m.Z)(i.viewData,e.view_data):e.view_data}),e):!i||e.view_type&&e.view_parameter?e:D(D({},e),{},{view_type:i.viewType||e.view_type,view_parameter:i.viewParameter,view_data:e.view_data?(0,m.Z)(e.view_data,i.viewData):i.viewData})},H=function(e){var r={};return null!=e&&e.storyPinProductEventData&&(r=D(D({},r),{},{storyPinProductEventData:e.storyPinProductEventData})),r},U=function(e,r){var t,n,i=e.component,o=e.element,a=e.object_id_str,u=e.view_type,c=e.event_type,s=e.appState;return null!=(t=((null==(n=e.event_data)?void 0:n[r])||[]).map(function(t){return D(D(D(D(D(D({auxData:e.aux_data},i?{component:i}:{}),{},{eventData:t},c?{eventType:c}:{}),u?{viewType:u}:{}),{},{viewData:e.view_data,viewParameter:e.view_parameter},a?{objectIdStr:a}:null),{},{impressionType:r},H(e.event_data)),{},{appState:s},o?{element:o}:{})}))?t:[]},F=function(e,r){return D(D(D(D({},e.component?{component:e.component}:{}),e.object_id_str?{objectIdStr:e.object_id_str}:null),e.view_type?{viewType:e.view_type}:{}),{},{eventType:e.event_type,auxData:e.aux_data,impressionType:r,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data})};function M(){var e=[],r=[],t=0;function n(){return[].concat(E(e),E(r.reduce(function(e,r){var t=e.find(function(e){return e.view_type===r.viewType&&e.view_parameter===r.viewParameter&&e.event_type===r.eventType&&e.object_id_str===r.objectIdStr&&(0,h.Z)(e.view_data,r.viewData)});if(t&&!N(r.eventType))r.impressionType in t.event_data?t.event_data[r.impressionType].push(r.eventData):t.event_data[r.impressionType]=[r.eventData];else{var n,i=r.storyPinProductEventData?{storyPinProductEventData:r.storyPinProductEventData}:{},o={appState:r.appState,aux_data:r.auxData||{},clientUUID:(0,a.Z)(),component:r.component,event_data:D(D({},i),{},O({},r.impressionType,!N(n=r.eventType)||N(n)&&S.has(n)?[r.eventData]:D(D({},r.eventData),(r.eventData||{})[r.impressionType]))),event_type:r.eventType,object_id_str:r.objectIdStr||void 0,time:(0,p.Z)(),view_data:r.viewData,view_parameter:r.viewParameter,view_type:r.viewType,element:r.element};e.push(o)}return e},[])))}function i(e){var r,t,n=e.error,i=e.isError,o=e.isDroppedEvent,a=e.isImpression,c=e.isEventSkipped,s=(0,u.Z)(),l=(null==s?void 0:s.userAgent)||{},p=!(l.isMobile||l.isTablet),d={error_message:null!=(r=null==n?void 0:n.message)?r:"unknown",appType:p?"WEB_DENZEL":"WEB_MOBILE",country:null!=(t=null==s?void 0:s.country)?t:"unknown",browserName:l.browserName,osName:l.osName,browserType:l.browserType,browserVersion:l.browserVersion,isError:i,isImpression:a,isEventSkipped:c};(0,y.nP)("".concat("webapp.metrics.contextLog.indexdb.").concat(o?"dropped":i?"errors":c?"skipped":"success"),{tags:d})}function s(){return d.apply(this,arguments)}function d(){return(d=k(regeneratorRuntime.mark(function e(){var r,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==(r=o)?void 0:r.clear();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i({isError:!0,error:{message:"Error while clearing cache",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(t=e.t0.stack)?t:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 8:case"end":return e.stop()}},e,null,[[0,5]])}))).apply(this,arguments)}function f(){e=[],r=[],t=0}function m(){return(m=k(regeneratorRuntime.mark(function e(r){var t,n,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=D(D({},r),{},{cache_created_time:(0,p.Z)(),isImpression:!1,aux_data:D(D({},r.aux_data),{},{is_context_cached:!0})}),e.next=4,null==(t=o)?void 0:t.setItem((0,a.Z)(),n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(u=e.t0.stack)?u:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function _(){return(_=k(regeneratorRuntime.mark(function e(r){var t,n,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=D(D({},r),{},{cache_created_time:(0,p.Z)(),isImpression:!0,auxData:D(D({},r.auxData),{},{is_impression_cached:!0})}),e.next=4,null==(t=o)?void 0:t.setItem((0,a.Z)(),n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({isError:!0,isImpression:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(u=e.t0.stack)?u:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function P(){return T.apply(this,arguments)}function T(){return(T=k(regeneratorRuntime.mark(function e(){var r,t,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),t=0,i=1e3,r.length){e.next=5;break}return e.abrupt("return");case 5:o=c.Z.create("ApiCResource",{events:r,report_time:(0,p.Z)()}),(a=function(){var e=k(regeneratorRuntime.mark(function e(){var n,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.callCreate({async:!0,showError:!1});case 3:s(),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),n=!(null!==e.t0&&void 0!==e.t0&&e.t0.api_error_code)||[v.dO,v.cZ,v.i1].includes(e.t0.api_error_code),function(e){var r,t,n=e.retryAttempts,i=e.error,o=e.events,a=(0,u.Z)(),c=(null==a?void 0:a.userAgent)||{},s=!(c.isMobile||c.isTablet),l={error_code:null!=(r=null==i?void 0:i.api_error_code)?r:"unknown",retryAttempts:n,appType:s?"WEB_DENZEL":"WEB_MOBILE",country:null!=(t=null==a?void 0:a.country)?t:"unknown",browserName:c.browserName,eventSize:o.length,osName:c.osName,browserType:c.browserType,browserVersion:c.browserVersion};(0,y.nP)("metrics_quality_web_retry_error_log",{tags:l})}({retryAttempts:t,error:e.t0,events:r}),n&&t<5?(c=i,t+=1,i*=2,setTimeout(a,c)):s();case 11:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}())(),f(),Z();case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return(j=k(regeneratorRuntime.mark(function t(){var n,a,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(e){return(0,p.Z)()-e<6e10},n=function(e){return(0,p.Z)()-e>864e11},t.prev=2,t.next=5,null==(u=o)?void 0:u.getAllItem();case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0=[];case 8:t.t0.forEach(function(t){var o=t.value,u=o.cache_created_time,c=o.isImpression,s=x(o,w);n(u)?i({isDroppedEvent:!0,isError:!1}):a(u)?i({isEventSkipped:!0}):c?(r.push(s),i({isImpression:!0,isError:!1})):(e.push(s),i({isError:!1}))}),t.next=15;break;case 12:t.prev=12,t.t1=t.catch(2),i({isError:!0,error:{message:"Error while syncing cached events",details:t.t1 instanceof Error?t.t1.message:"Unknown error",stack_trace:t.t1 instanceof Error&&null!=(c=t.t1.stack)?c:"No stack trace available",errorName:t.t1 instanceof Error?t.t1.name:"N/A"}});case 15:return t.prev=15,P(),s(),t.finish(15);case 19:case"end":return t.stop()}},t,null,[[2,12,15,19]])}))).apply(this,arguments)}return{flushContextEvents:P,getContextEvents:n,logContextEvent:function(r){var n,i=r.object_id_str,o=x(r,b),u=(0,p.Z)(),c=D(D({aux_data:{},event_data:{},view_data:{}},o),{},{time:u,clientUUID:(0,a.Z)()},i?{object_id_str:i}:null),s=(n=c.aux_data)?(n.element,n.eventData,n.component,n.objectId,n.view,n.viewParameter,n.viewData,n.durationNs,n.pairId,n.clientTrackingParams,function(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],-1===r.indexOf(t)&&({}).propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(n,l)):n;c=D(D({},c),{},{aux_data:s}),t+R(c)>20480&&P(),e.push(c),t+=R(c),Z(),function(e){m.apply(this,arguments)}(c)},logImpression:function(e){t+R(e)>20480&&P(),r.push(e),t+=R(e),function(e){_.apply(this,arguments)}(e)},resetEventsBuffer:f,syncCachedEndEvents:function(){return j.apply(this,arguments)},_getIndexDBInstance:function(){return o},initiateIndexDBCache:function(){var e;null!=(e=window)&&e.indexedDB&&(o=o||new g.Z(window.indexedDB,"ContextLoggingDB","ContextLoggingTable"))}}}},973160:function(e,r,t){t.d(r,{s:function(){return n}});var n=function(){var e,r;return"undefined"!==document.hidden?(e="hidden",r="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",r="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",r="webkitvisibilitychange"),{hidden:e,visibilityChange:r}};r.Z=function(){return 1e6*Date.now()}},622481:function(e,r,t){r.Z=(0,t(586659).createContext)(null)},282803:function(e,r,t){r.Z=(0,t(586659).createContext)(null)},664450:function(e,r,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,r,t,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,i)}function o(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var a=e.apply(r,t);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)})}}function a(e){var r=function(e,r){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,r||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==n(r)?r:r+""}t.d(r,{Z:function(){return u}});var u=function(){var e,r,t,n,i,u,c,s,l;function p(e){var r,t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myDatabase",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"myStore";if(!(this instanceof p))throw TypeError("Cannot call a class as a function");r="cache",t=new Map,(r=a(r))in this?Object.defineProperty(this,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[r]=t,this.dbName=i,this.storeName=u,this.dbPromise=o(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.initializeDB(e);case 3:return r.abrupt("return",r.sent);case 6:return r.prev=6,r.t0=r.catch(0),r.abrupt("return",null);case 9:case"end":return r.stop()}},r,null,[[0,6]])}))()}return l=[{key:"initializeDB",value:(e=o(regeneratorRuntime.mark(function e(r){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{var i=r.open(t.dbName,1);i.onerror=function(){n(Error("IndexedDB initialization error: "+i.error))},i.onupgradeneeded=function(){var e=i.result;e.objectStoreNames.contains(t.storeName)||e.createObjectStore(t.storeName,{keyPath:"key"})},i.onsuccess=function(){e(i.result)}}catch(e){n(Error("IndexedDB initialization error: "+e))}}));case 1:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)})},{key:"reopenDatabaseIfClosed",value:(r=o(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbPromise;case 2:if(!((r=e.sent)&&!r.close)){e.next=5;break}return e.abrupt("return",r);case 5:return this.dbPromise=this.initializeDB(window.indexedDB),e.abrupt("return",this.dbPromise);case 7:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getObjectStore",value:(t=o(regeneratorRuntime.mark(function e(){var r,t,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:"readwrite",e.next=3,this.reopenDatabaseIfClosed();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",t.transaction(this.storeName,r).objectStore(this.storeName));case 7:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"getItem",value:(n=o(regeneratorRuntime.mark(function e(r){var t,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(r)){e.next=2;break}return e.abrupt("return",null!=(t=this.cache.get(r))?t:null);case 2:return e.next=4,this.getObjectStore();case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",new Promise(function(e,t){var o=n.get(r);o.onerror=function(){return t(o.error)},o.onsuccess=function(){var t,n=(null==(t=o.result)?void 0:t.value)||null;null!==n&&i.cache.set(r,n),e(n)}}));case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getAllItem",value:(i=o(regeneratorRuntime.mark(function e(){var r,t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getObjectStore();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new Promise(function(e,n){var i=r.getAll();i.onerror=function(){return n(i.error)},i.onsuccess=function(){var r;null==(r=i.result)||r.forEach(function(e){t.cache.set(e.key,e.value)}),e(i.result)}}));case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"setItem",value:(u=o(regeneratorRuntime.mark(function e(r,t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.set(r,t),e.next=3,this.getObjectStore();case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,i){var o=n.put({key:r,value:t});o.onerror=function(){i(o.error)},o.onsuccess=function(){e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(e,r){return u.apply(this,arguments)})},{key:"removeItem",value:(c=o(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.delete(r),e.next=3,this.getObjectStore();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,n){var i=t.delete(r);i.onerror=function(){return n(i.error)},i.onsuccess=function(){return e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"clear",value:(s=o(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.clear(),e.next=3,this.getObjectStore();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,t){var n=r.clear();n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})}],function(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}(p.prototype,l),Object.defineProperty(p,"prototype",{writable:!1}),p}()},121793:function(e,r,t){t.d(r,{w:function(){return x}});var n,i=t(898582),o=t(973160),a=t(664450),u=t(732888),c=t(510928),s=t(603316);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,r,t,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,i)}function d(e){return function(){var r=this,t=arguments;return new Promise(function(n,i){var o=e.apply(r,t);function a(e){p(o,n,i,a,u,"next",e)}function u(e){p(o,n,i,a,u,"throw",e)}a(void 0)})}}function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach(function(r){v(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function v(e,r,t){return(r=h(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function h(e){var r=function(e,r){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==l(r)?r:r+""}var g=null,y="ACTIVE",b="PAUSED",w=function(){return window&&window.performance&&window.performance.now?"(Time: ".concat((window.performance.now()/1e3).toFixed(3),"s)"):""},_=function(e){var r=!1;return function(){r||(r=!0,e.apply(void 0,arguments))}};function x(e){var r,t=e.contextLogger;if(n||(n=null!=(r=window)&&r.indexedDB?new a.Z(window.indexedDB,"EventLoggingDB","TimeSpent"):null),g)return g;var l=new Map,p=(0,c.Z)()&&(0,c.Z)().debug_timespent,f=[],x=p?console:{error:function(){},log:function(){},group:function(){},groupEnd:function(){}};return console.group||(x.group=function(){var e;return(e=console).log.apply(e,arguments)},x.groupEnd=function(){}),g=new(function(){var e;function r(){var e,a,c,h,g=this;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");v(this,"appTimedPair",null),v(this,"clickthroughProperties",null),v(this,"historyStackContext",null),v(this,"offsiteTimedPair",null),v(this,"offsiteTimedPairForegroundId",null),v(this,"pins",Object.freeze({})),v(this,"addEventListeners",function(){var e=(0,o.s)(),r=e.hidden,t=e.visibilityChange;t&&document.addEventListener(t,function(e){document[r]?g.unregisterApp(void 0,e):g.registerApp()},!1),window.addEventListener("focus",g.registerApp),window.addEventListener("blur",function(e){return g.unregisterApp(void 0,e)});var n=_(function(e){return g.unregisterApp(void 0,e)});window.addEventListener("beforeunload",n),window.addEventListener("pagehide",n);var i=navigator&&navigator.userAgent.toLowerCase();i&&i.includes("macintosh")&&i.includes("chrome")&&window.addEventListener("popstate",function(){document.hasFocus()||document[r]||(0,s.nP)("chrome_mac_back_forward_button",{sampleRate:1})})}),v(this,"storeClickthroughProperties",function(e){g.clickthroughProperties&&(0,s.nP)("webapp.metrics.clickthroughs.overwritten",{sampleRate:1,tags:{previousView:g.clickthroughProperties.view_type,previousViewParameter:g.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}}),g.clickthroughProperties=m({time:(0,o.Z)()},e)}),v(this,"clearClickthroughProperties",function(){g.clickthroughProperties=null,g.offsiteTimedPair=null,g.offsiteTimedPairForegroundId=null}),v(this,"registerApp",function(){x.group("App Foreground",w()),null==g.appTimedPair?(g.appTimedPair=new u.Z,g.appTimedPair.start(),g._unpauseAllComponents(),g._endOffsiteTimedPair(),null!==g.appTimedPair&&void 0!==g.appTimedPair&&t.logContextEvent({event_type:4700,pair_id:g.appTimedPair.uuid})):x.error("TimedPair already exists for app."),x.groupEnd()}),v(this,"logIndexDbStatLog",function(e){var r,t,n,o,a,u=e.error,c=e.isError,l=e.isDroppedEvent,p=(0,i.Z)(),d=(null==p?void 0:p.userAgent)||{},f=!(d.isMobile||d.isTablet),m={error_message:null!=(r=null==u?void 0:u.message)?r:"unknown",appType:f?"WEB_DENZEL":"WEB_MOBILE",country:null!=(t=null==p?void 0:p.country)?t:"unknown",browserName:d.browserName,osName:d.osName,browserType:d.browserType,browserVersion:d.browserVersion,isError:c,errorName:null!=(n=null==u?void 0:u.errorName)?n:"unknown",errorDetails:null!=(o=null==u?void 0:u.details)?o:"unknown",errorStackTrace:null!=(a=null==u?void 0:u.stack_trace)?a:"unknown"};(0,s.nP)("".concat("webapp.metrics.timespent.indexdb.").concat(l?"dropped":c?"errors":"success"),{tags:m})}),v(this,"unregisterApp",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;x.group("App Background",w());var n=g.appTimedPair;if(null!=n){g._pauseAllComponents();var i=n.end();g._startOffsiteTimedPair(),t.logContextEvent({event_type:4701,duration_ns:i,pair_id:n.uuid}),g.appTimedPair=null}else x.error("No TimedPair found for app.");var o=["beforeunload","pagehide"],a=o.includes((null==r?void 0:r.type)||""),u=o.includes((null==r?void 0:r.pauseReason)||"");(a||u)&&g._endOffsiteTimedPair(),e||t.flushContextEvents(),x.groupEnd()}),v(this,"_activateComponent",function(e){x.group("Activating component",w()),p&&x.log(e.getContext());var r=e.getTimedPair();if(r){r.start();var n=e.getLoggerContext(),i=n.view,o=n.viewParameter,a=n.component,u=n.element,c=n.objectId,s=n.clientTrackingParams;t.logContextEvent({event_type:4702,view_type:i,view_parameter:o,component:a,element:u,object_id_str:c,view_data:e.props.viewData,pair_id:r.uuid,clientTrackingParams:s,aux_data:m({time_spent_foreground_pairid:g.appTimedPair&&g.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}x.groupEnd()}),v(this,"_deactivateComponent",function(e){x.group("Deactivating component",w()),p&&x.log(e.getContext());var r=e.getTimedPair();if(r){var n=r.view,i=r.viewParameter,o=r.component,a=r.element,u=r.objectId,c=r.clientTrackingParams,s=r.end();t.logContextEvent({event_type:4703,view_type:n,view_parameter:i,component:o,element:a,object_id_str:u,view_data:e.props.viewData,duration_ns:s,pair_id:r.uuid,clientTrackingParams:c,aux_data:m({time_spent_foreground_pairid:g.appTimedPair&&g.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}x.groupEnd()}),v(this,"_startOffsiteTimedPair",function(){var e,r,n=g.clickthroughProperties;n&&(g.offsiteTimedPair=new u.Z({view:186,viewParameter:n.view_parameter,objectId:n.object_id_str}),g.offsiteTimedPair.start(),g.offsiteTimedPairForegroundId=g.appTimedPair?g.appTimedPair.uuid:null,n=m(m({},n),{},{aux_data:m(m({},n.aux_data),{},{time_to_offsite:void 0!==n.time&&null!==n.time&&"number"==typeof n.time?(0,o.Z)()-n.time:void 0})}),t.logContextEvent(m(m({},n),{},{event_type:4702,view_type:186,pair_id:g.offsiteTimedPair?g.offsiteTimedPair.uuid:null,aux_data:m(m({},n.aux_data),{},{time_spent_foreground_pairid:g.offsiteTimedPairForegroundId})})),g._addOffSitePairToIndexDB({offsiteTimedPairUUID:null==(e=g.offsiteTimedPair)?void 0:e.uuid,clickthroughProperties:n,timeCreated:null==(r=g.offsiteTimedPair)?void 0:r.startTime,offsiteTimedPairForegroundId:g.offsiteTimedPairForegroundId}))}),v(this,"_endOffsiteTimedPair",function(){var e=g.offsiteTimedPair,r=g.clickthroughProperties;if(e&&r){var n,i=e.end();t.logContextEvent(m(m({},r),{},{event_type:4703,view_type:186,pair_id:g.offsiteTimedPair?g.offsiteTimedPair.uuid:null,aux_data:m(m({},r.aux_data),{},{time_spent_foreground_pairid:g.offsiteTimedPairForegroundId}),duration_ns:i})),g._removeOffSitePairByIdFromIndexDB(null==(n=g.offsiteTimedPair)?void 0:n.uuid),g._syncCachedTimedPairEndEvents(),g._onOffsiteEnd(),g.clearClickthroughProperties()}else g._syncCachedTimedPairEndEvents()}),v(this,"_addOffSitePairToIndexDB",(e=d(regeneratorRuntime.mark(function e(r){var t,i,o,a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.offsiteTimedPairUUID,i=r.clickthroughProperties,o=r.timeCreated,a=r.offsiteTimedPairForegroundId,e.prev=1,e.next=4,null==(u=n)?void 0:u.setItem(t,{clickthroughProperties:m({},i),timeCreated:o,offsiteTimedPairForegroundId:a});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),g.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(c=e.t0.stack)?c:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[1,6]])})),function(r){return e.apply(this,arguments)})),v(this,"_addAppTimerToIndexDB",(a=d(regeneratorRuntime.mark(function e(r){var t,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.foregroundAppTimerUUID,i=r.timeCreated,e.prev=1,e.next=4,null==(o=n)?void 0:o.setItem(t,{timeCreated:i});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),g.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(a=e.t0.stack)?a:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[1,6]])})),function(e){return a.apply(this,arguments)})),v(this,"_removeAppTimerFromIndexDB",(c=d(regeneratorRuntime.mark(function e(r){var t,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.foregroundAppTimerUUID,e.prev=1,t){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,null==(i=n)?void 0:i.removeItem(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),g.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(o=e.t0.stack)?o:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return c.apply(this,arguments)})),v(this,"_removeOffSitePairByIdFromIndexDB",(h=d(regeneratorRuntime.mark(function e(r){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,null==(t=n)?void 0:t.removeItem(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(i=e.t0.stack)?i:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return h.apply(this,arguments)})),v(this,"_syncCachedTimedPairEndEvents",d(regeneratorRuntime.mark(function e(){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return(0,u.h)()-e>864e11},e.prev=1,e.next=4,null==(i=n)?void 0:i.getAllItem();case 4:return(e.sent||[]).forEach(function(){var e=d(regeneratorRuntime.mark(function e(n){var i,o,a,c,s,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n.key,a=(o=n.value).clickthroughProperties,c=o.timeCreated,s=o.offsiteTimedPairForegroundId,l=(0,u.h)(),p=c?l-c:null,c&&r(c)?g.logIndexDbStatLog({isDroppedEvent:!0,isError:!1}):(t.logContextEvent(m(m({},a),{},{event_type:4703,view_type:186,pair_id:i||null,aux_data:m(m({},null==a?void 0:a.aux_data),{},{time_spent_foreground_pairid:s,is_timed_pair_cached:!0}),duration_ns:p})),g.logIndexDbStatLog({isError:!1}));case 5:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),e.next=8,null==(o=n)?void 0:o.clear();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),g.logIndexDbStatLog({isError:!0,error:{message:"Error while syncing cached events",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(a=e.t0.stack)?a:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 13:case"end":return e.stop()}},e,null,[[1,10]])}))),v(this,"_onOffsiteEnd",function(){x.group("Trigger onOffsiteEndCallbacks"),f.forEach(function(e){return e({appTimedPair:g.appTimedPair,clickthroughProperties:g.clickthroughProperties,offsiteTimedPair:g.offsiteTimedPair,offsiteTimedPairForegroundId:g.offsiteTimedPairForegroundId})}),x.groupEnd()}),v(this,"_pauseAllComponents",function(){x.group("Pause all components"),l.forEach(function(e,r,t){e===y&&g._deactivateComponent(r),t.set(r,b)}),x.groupEnd()}),v(this,"_unpauseAllComponents",function(){x.group("Unpause all components"),l.forEach(function(e,r){var t=new u.Z(r.getLoggerContext());r.setTimedPair(t,function(){l.set(r,y),g._activateComponent(r)})}),x.groupEnd()})}return e=[{key:"setHistoryStackContext",value:function(e){this.historyStackContext=e}},{key:"setPins",value:function(e){this.pins=e}},{key:"startOffsiteRightClickTimedPair",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._startOffsiteTimedPair(),e||t.flushContextEvents()}},{key:"registerComponent",value:function(e){null===this.appTimedPair?l.set(e,b):(l.set(e,y),this._activateComponent(e))}},{key:"unregisterComponent",value:function(e){l.get(e)===y&&(this._deactivateComponent(e),e.setTimedPair(new u.Z(e.getLoggerContext()))),l.delete(e)}},{key:"size",value:function(){return l.size}},{key:"onOffsiteEnd",value:function(e){f.push(e)}},{key:"removeOnOffsiteEnd",value:function(e){var r=f.indexOf(e);r>-1&&f.splice(r,1)}},{key:"_getIndexDBInstance",value:function(){return n}},{key:"_getContextLogger",value:function(){return t}},{key:"_clearTimeSpentManager",value:function(){g=null}}],function(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}())}}}]);