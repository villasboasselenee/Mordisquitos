"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["64701"],{713020:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var o,r=t(586659),i=t(581722),a=t(20256),l=t(890479),u=t(374114),c=t(111330),s=t(355940),d=t(364843),v=t(525839),p=t(67831);function f(e){var n=e.constraint,t=(0,p.A)(),o=null==t?void 0:t.getId();return(0,r.useEffect)(function(){t&&t.markConstraintComplete(n)},[o,n]),null}var m=t(956077),h=t(821806),b=t(753143),y=t(572227),S=t(341742),P=t(923924),k=t(542963),x=t(441733),w=t(966838),g=t(373950),B=t(78762),C=t(382718);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,n,t,o,r,i,a){try{var l=e[i](a),u=l.value}catch(e){return void t(e)}l.done?n(u):Promise.resolve(u).then(o,r)}var I=(0,B.Z)(function(){return t.e("32560").then(t.bind(t,817631))},void 0,function(e){return 817631},"PinSaveButtonCommon",function(e){return ["32560"]}),j=(0,r.lazy)((o=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e("71929"),t.e("42055"),t.e("24660")]).then(t.bind(t,418581));case 2:return e.t0=e.sent.QuickSaveButtonWithExperienceAnchor,e.abrupt("return",{default:e.t0});case 4:case"end":return e.stop()}},e)}),function(){var e=this,n=arguments;return new Promise(function(t,r){var i=o.apply(e,n);function a(e){_(i,t,r,a,l,"next",e)}function l(e){_(i,t,r,a,l,"throw",e)}a(void 0)})})),Z=function(e){var n,t,o=e.boardCount,B=e.clientTrackingParams,_=e.onBoardSelectionFlyoutChange,Z=e.onClickCallback,A=e.pin,D=e.showEnabledSaveBehavior,F=e.showRepinOnInitialRender,Q=e.variant,R=e.viewParameter,U=e.viewType,E=e.saveToBoardFromPostDownloadUpsell,M=e.setSaveToBoardFromPostDownloadUpsell,O=(0,p.A)(),K=(0,d.Ow)(1000310).experience,N=(0,d.Ow)(12).experience,z=(0,y.Z)(),J=(0,i.I0)(),W=(0,v.ZP)(),q=(0,r.useRef)(!1),H=(0,k.Z)(),L=H.pins,V=H.clear,X=(0,b.M0)().getItem(c.M8)||"",G=X?X===A.id:!!L&&L.length>0&&L[L.length-1].id===A.id,Y=(0,x.Z)().shouldSeePinBetterSave;(0,S.Z)(function(){q.current||2!==L.length&&(1!==L.length||G)||(q.current=!0,(2===L.length&&!X&&G?[L[0]]:L).forEach(function(e){var n=e.id,t=e.nodeId;(0,u.Z)({description:"",entityId:n,link:"",promotedIsRemovable:void 0,title:""},W).then(function(e){var o=e.id,r=e.url,i=e.name;J((0,w.d)({boardId:o,url:r,title:i||"",pinId:n||"",nodeId:t}))})}),G||V())});var $=function(){(0,b.M0)().removeItem(c.M8),V(),z({action:"trigger",item:"unauth-save-button-quicksave"}),J((0,g.Z)(!0)),J((0,w.d)({boardId:"",url:"",title:"Profile",pinId:A.id,nodeId:null==A?void 0:A.node_id})),J((0,w.X)(A))},ee=function(){(0,m.Nx)("button"),O&&O.markConstraintComplete("button")};if(null!=A&&null!=(n=A.pinner)&&n.blocked_by_me||null!=A&&A.promoted_is_removable)return(0,m.Nx)("button"),(0,C.jsx)(f,{constraint:"button"});if(!Y&&K&&502450===K.experience_id)return(0,C.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_QuickSaveButton",children:(0,C.jsx)(h.Z,{children:(0,C.jsx)(l.Z,{id:"QuickSaveButtonWithExperienceAnchor",children:(0,C.jsx)(j,{autoQuicksaveCallback:$,clientTrackingParams:B,experience:K,onClickCallback:Z,onMount:ee,pinKey:{type:"deprecated",data:A},saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:M,shouldAutoQuicksave:G,showEnabledSaveBehavior:D,viewParameter:R})})})});var en=!(null!=(t=A.content_sensitivity)&&t.is_sensitive_content)&&void 0!==(void 0===o?0:o)||Y,et=[501041],eo=N&&501041===N.experience_id&&N.display_data.has_tooltip?function(e){return(0,C.jsx)(d.Qp,{anchor:e,experienceIds:et,idealDirection:"down",placementId:12,positionRelativeToAnchor:!0,showCaret:!0})}:function(e){var n,t,o;return(0,C.jsx)(d.N,{anchors:(n={},(o=function(e,n){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!=T(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(t=3010,"string"),(t="symbol"==T(o)?o:o+"")in n)?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n),idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})};return en?(0,C.jsx)(a.xu,{children:(0,C.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinBetterSave",children:(0,C.jsx)(l.Z,{id:"PinBetterSave",children:(0,C.jsx)(P.default,{autoQuicksaveCallback:$,clientTrackingParams:B,onClickCallback:Z,onMount:ee,onToggleFlyout:_,pinKey:{type:"deprecated",data:A},renderPinSaveTooltip:eo,saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:M,shouldAutoQuicksave:G,variant:Q,viewParameter:R,viewType:U})})})}):(0,C.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinSaveButton",children:(0,C.jsx)(h.Z,{children:(0,C.jsx)(l.Z,{id:"PinSaveButton",children:(0,C.jsx)(I,{clientTrackingParams:B,isCloseupPin:!0,onClickCallback:Z,onMount:ee,pinKey:{type:"deprecated",data:A},renderPinSaveTooltip:eo,saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:M,showRepinOnInitialRender:F})})})})}},373950:function(e,n,t){t.d(n,{Z:function(){return o}});function o(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);